language: node_js
node_js:
  - '0.10'
before_install:
  - npm install -g grunt-cli
  - npm install -g bower
before_script:
  - bower install
  - grunt build
script: grunt travis
env: NODE_ENV=test GITHUB_CLIENT_ID=githubClientId GITHUB_CLIENT_SECRET=githubClientSecret REDISCLOUD_URL="redis://localhost:6379" COOKIE_SECRET=cookieSecret GIMLI_REDIRECT_URL=http://localhost:3000/auth/github/callback
services:
  - redis-server
notifications:
  webhooks: http://legitbot.herokuapp.com/hubot/travis?room=#legitco
deploy:
  provider: heroku
  api_key:
    secure: Yv80lG15Z24u1rEzboeUad6qlHFrrhA91XTwzKdOjO7fjbsW160tGTwy0BHe4sZzE8Y0+3bgHaCqSuz9kUPTNbPcRsVYG5oU6ptTiAryrAwa/uj3whH3+dopkBDQi6pAj8KTWN0c68lPDyQgnsgSJd4oQ101SdAXBwNe3N3UpZE=
  skip_cleanup: true
  # buildpack: https://github.com/mbuchetics/heroku-buildpack-nodejs-grunt.git
  app: gim-legit
  on:
    branch: master
    repo: legitco/gimli
